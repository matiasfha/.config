"use strict";var f=Object.defineProperty;var P=Object.getOwnPropertyDescriptor;var x=Object.getOwnPropertyNames;var B=Object.prototype.hasOwnProperty;var C=(t,r)=>{for(var p in r)f(t,p,{get:r[p],enumerable:!0})},D=(t,r,p,d)=>{if(r&&typeof r=="object"||typeof r=="function")for(let c of x(r))!B.call(t,c)&&c!==p&&f(t,c,{get:()=>r[c],enumerable:!(d=P(r,c))||d.enumerable});return t};var S=t=>D(f({},"__esModule",{value:!0}),t);var O={};C(O,{default:()=>b});module.exports=S(O);var n=require("@raycast/api"),o=require("@raycast/api"),y=require("child_process");var I=require("@raycast/api"),l=new I.Cache,u="pomodoro-interval/1.1",v=()=>Math.round(new Date().valueOf()/1e3);function g({parts:t}){return!!t[t.length-1].pausedAt}function s(t){let r={type:t,length:T[t],parts:[{startedAt:v()}]};return l.set(u,JSON.stringify(r)),r}function A(){let t=m();if(t){let r=[...t.parts];r[r.length-1].pausedAt=v(),t={...t,parts:r},l.set(u,JSON.stringify(t))}return t}function h(){let t=m();if(t){let r=[...t.parts,{startedAt:v()}];t={...t,parts:r},l.set(u,JSON.stringify(t))}return t}function k(){l.remove(u)}function m(){let t=l.get(u);if(t)return JSON.parse(t)}var a=(0,I.getPreferenceValues)(),T={focus:parseInt(a.focusIntervalDuration)*60,"short-break":parseInt(a.shortBreakIntervalDuration)*60,"long-break":parseInt(a.longBreakIntervalDuration)*60};var e=require("react/jsx-runtime"),i=t=>()=>{t();try{(0,n.launchCommand)({name:"pomodoro-menu-bar",type:n.LaunchType.UserInitiated})}catch(r){console.error(r)}(0,n.popToRoot)(),(0,n.closeMainWindow)()},L=()=>{let t=m();return(0,e.jsx)(n.List,{navigationTitle:"Control Pomodoro Timers",children:t?(0,e.jsxs)(e.Fragment,{children:[g(t)?(0,e.jsx)(n.List.Item,{title:"Continue",icon:n.Icon.Play,actions:(0,e.jsx)(o.ActionPanel,{children:(0,e.jsx)(o.Action,{onAction:i(h),title:"Continue"})})}):(0,e.jsx)(n.List.Item,{title:"Pause",icon:n.Icon.Pause,actions:(0,e.jsx)(o.ActionPanel,{children:(0,e.jsx)(o.Action,{onAction:i(A),title:"Pause"})})}),(0,e.jsx)(n.List.Item,{title:"Reset",icon:n.Icon.Stop,actions:(0,e.jsx)(o.ActionPanel,{children:(0,e.jsx)(o.Action,{onAction:i(k),title:"Reset"})})})]}):(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)(n.List.Item,{title:"Focus",subtitle:`${a.focusIntervalDuration}:00`,icon:"\u{1F3AF}",actions:(0,e.jsx)(o.ActionPanel,{children:(0,e.jsx)(o.Action,{onAction:i(()=>s("focus")),title:"Focus"})})}),(0,e.jsx)(n.List.Item,{title:"Short Break",subtitle:`${a.shortBreakIntervalDuration}:00`,icon:"\u{1F9D8}\u200D\u2642\uFE0F",actions:(0,e.jsx)(o.ActionPanel,{children:(0,e.jsx)(o.Action,{onAction:i(()=>s("short-break")),title:"Short Break"})})}),(0,e.jsx)(n.List.Item,{title:"Long Break",subtitle:`${a.longBreakIntervalDuration}:00`,icon:"\u{1F6B6}",actions:(0,e.jsx)(o.ActionPanel,{children:(0,e.jsx)(o.Action,{onAction:i(()=>s("long-break")),title:"Long Break"})})})]})})},$=()=>(a.sound&&(0,y.exec)(`afplay /System/Library/Sounds/${a.sound}.aiff -v 10 && $$`),(0,e.jsx)(n.Detail,{navigationTitle:"Interval completed",markdown:`${a.completionImage}`,actions:(0,e.jsxs)(o.ActionPanel,{title:"Start Next Interval",children:[(0,e.jsx)(o.Action,{title:"Focus",onAction:i(()=>s("focus")),shortcut:{modifiers:["cmd"],key:"f"}}),(0,e.jsx)(o.Action,{title:"Short Break",onAction:i(()=>s("short-break")),shortcut:{modifiers:["cmd"],key:"s"}}),(0,e.jsx)(o.Action,{title:"Long Break",onAction:i(()=>s("long-break")),shortcut:{modifiers:["cmd"],key:"l"}})]})}));function b(t){return t.launchContext?.currentInterval?(0,e.jsx)($,{}):(0,e.jsx)(L,{})}0&&(module.exports={});
