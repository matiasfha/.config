"use strict";var o=Object.defineProperty;var g=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var h=Object.prototype.hasOwnProperty;var w=(a,e)=>{for(var t in e)o(a,t,{get:e[t],enumerable:!0})},d=(a,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of y(e))!h.call(a,s)&&s!==t&&o(a,s,{get:()=>e[s],enumerable:!(n=g(e,s))||n.enumerable});return a};var N=a=>d(o({},"__esModule",{value:!0}),a);var C={};w(C,{default:()=>l});module.exports=N(C);var i=require("@raycast/api");var r=require("@raycast/api"),u=require("node:child_process");async function m(a,e,t){e&&await(0,r.showHUD)(e),await $({menubar:!1,status:!1}),(0,u.exec)(`/usr/bin/caffeinate ${v(t)} || true`),await c(a,!0)}async function $(a,e){e&&await(0,r.showHUD)(e),(0,u.execSync)("/usr/bin/killall caffeinate || true"),await c(a,!1)}async function c(a,e){a.menubar&&await f("index",{caffeinated:e}),a.status&&await f("status",{caffeinated:e})}async function f(a,e){try{await(0,r.launchCommand)({name:a,type:r.LaunchType.Background,context:e})}catch{}}function v(a){let e=(0,r.getPreferenceValues)(),t=[];return e.preventDisplay&&t.push("d"),e.preventDisk&&t.push("m"),e.preventSystem&&t.push("i"),a&&t.push(` ${a}`),t.length>0?`-${t.join("")}`:""}async function l(a){let{hours:e,minutes:t,seconds:n}=a.arguments;if(!(e||t||n)){await(0,i.showToast)(i.Toast.Style.Failure,"No values set for caffeinate length");return}if(!((!e||Number.isInteger(Number(e))&&Number(e)>=0)&&(!t||Number.isInteger(Number(t))&&Number(t)>=0)&&(!n||Number.isInteger(Number(n))&&Number(n)>=0))){await(0,i.showToast)(i.Toast.Style.Failure,"Please ensure all arguments are whole numbers");return}let p=Number(e)*3600+Number(t)*60+Number(n),b=`${e?`${e}h`:""}${t?`${t}m`:""}${n?`${n}s`:""}`;await m({menubar:!0,status:!0},`Caffeinating your Mac for ${b}`,`-t ${p}`)}
